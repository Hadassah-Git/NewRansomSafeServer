package check;
import java.io.*; 
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.time.LocalDate;
import java.time.ZoneId;
import java.util.Calendar;
import java.util.Date; 

public class ScanningFiles 
{
	public static void main(String[] args) throws IOException, ParseException 
	{
		
	    SimpleDateFormat ft = new SimpleDateFormat ("yyyy-MM-dd");        String input = args.length == 0 ? "1818-11-11" : args[0];  
	    
	      System.out.print(input + " Parses as ");        Date t;       try {          t = ft.parse(input);           System.out.println(t);        } catch (ParseException e) {           System.out.println("Unparseable using " + ft);        }   

		LocalDate localDate = LocalDate.now();
		System.out.println(localDate);
		
		Date date = Date.from(localDate.atStartOfDay(ZoneId.systemDefault()).toInstant());
		
		//והתאריכים ההאש מערכי ובניית הראשונה בפעם סריקה
		Global globals= Global.GetGlobals();
		TwoDates myD=null;
		int i=0;
		boolean result=true;
		Date[] dateArrTemp=new Date[10];//מערך בגודל כל הקבצים לתאריכים
		Integer[] hashArrTemp=new Integer[10];//מערך בגודל כל הקבצים להאש

		//!!!!!!!!!!!!!!!!!!!!!!!!!!!שהחלטנו התיקיות על לעבור
		File file = new File("F:\\gf");
		File[] files = file.listFiles();
		
		for(File f: files)//סריקת קבצי 'מלכודות הדבש'
		{
			myD= AccessFiles.DateAndTimeAccessFile(f);//קבלת זמן הגישה האחרון לקובץ
			System.out.print(myD);
			dateArrTemp[i]=myD.getTime();
			hashArrTemp[i]=f.hashCode();
			i++;
			System.out.print(f.hashCode()); 
		}
		//אכסון הערכים בטבלאות הגלובאליות
		globals.timesFilesBeforeSend.put(myD.getDate(),dateArrTemp);
		globals.hashFilesBeforeSend.put(myD.getDate(),hashArrTemp );
		
		
		//הבקשה ושליחת בקשות קבלת
				
		Temp.ScannAgain();//סריקה חוזרת אחרי שליחת הבקשה
		
		
		//בדיקת השוואה
		result=ComparisonAccessTime.Comp();
	}
}
