
import java.awt.font.TransformAttribute;
import java.util.*;


//ניהול חלוקת מכונות וירטואליות
public class DistributionVMManager {

//	Dictionary <String,boolean > d=new Dictionary <String ,boolean >();
//	Bms.GetHostAdress(Ingroment.machineName)[0].ToString();
	
	Map<String, Boolean> mapVM = new HashMap<>();
	 static Object lock = new Object();

	public String getFreeVM() //מחזירה שם של מכונה פנויה
	{
		for (Map.Entry<String, Boolean> thisVM : mapVM.entrySet())
		{
			//חסימה
			synchronized(lock){
				if(thisVM.getValue())
				{			
					SetVMState(thisVM.getKey(), false);
					return thisVM.getKey();
				}
			}
		}
		return "wait";
	}
	
	public void SetVMState(String name, boolean state)//מכניס את המכונות ומעדכן את הסטוס כל פעם
	{
		mapVM.put(name, state);
	}
	
}
